/* css/dashboard/notifications.css  v2
   Toast pop-ups, bell, notification panel
   ─────────────────────────────────────── */

/* ── Toast container ────────────────────────────────────────── */
#toast-container {
  position       : fixed;
  bottom         : 1.25rem;
  right          : 1.25rem;
  z-index        : 9999;
  display        : flex;
  flex-direction : column-reverse;
  gap            : .5rem;
  pointer-events : none;
}

/* ── Toast ───────────────────────────────────────────────────── */
.toast {
  display       : flex;
  align-items   : flex-start;
  gap           : .65rem;
  min-width     : 260px;
  max-width     : 340px;
  padding       : .72rem 1rem;
  background    : #13141e;
  border        : 1px solid rgba(255,255,255,.07);
  border-left   : 3px solid var(--dash-accent);
  border-radius : 10px;
  box-shadow    : 0 8px 28px rgba(0,0,0,.55);
  pointer-events: all;
  transform     : translateX(110%);
  opacity       : 0;
  transition    : transform .3s cubic-bezier(.22,1,.36,1), opacity .25s ease;
}
.toast--visible {
  transform: translateX(0);
  opacity  : 1;
}

.toast-icon {
  flex-shrink: 0;
  margin-top : 1px;
  color      : var(--dash-accent);
  display    : flex;
  align-items: center;
}
.toast-content { flex: 1; min-width: 0; }
.toast-title {
  font-size     : .78rem;
  font-weight   : 700;
  color         : #dde4f0;
  letter-spacing: .03em;
  margin-bottom : 1px;
}
.toast-body {
  font-size     : .74rem;
  color         : #7a8899;
  white-space   : nowrap;
  overflow      : hidden;
  text-overflow : ellipsis;
}
.toast-close {
  background : none;
  border     : none;
  color      : #445055;
  cursor     : pointer;
  padding    : 2px;
  margin-left: .2rem;
  flex-shrink: 0;
  transition : color .15s;
  display    : flex;
  align-items: center;
  margin-top : 2px;
}
.toast-close:hover { color: #c0c8d8; }

/* Per-type left border colours */
.toast--friend_request { border-left-color: var(--dash-accent); }
.toast--friend_accept  { border-left-color: var(--dash-green); }
.toast--message        { border-left-color: #a855f7; }
.toast--alert          { border-left-color: #f5a623; }
.toast--success        { border-left-color: var(--dash-green); }
.toast--error          { border-left-color: var(--dash-red); }
.toast--info           { border-left-color: var(--dash-accent); }
.toast--achievement    {
  border-left-color: #f5a623;
  background: linear-gradient(135deg, rgba(245,166,35,.06) 0%, #13141e 70%);
}
.toast--achievement .toast-title { color: #f5a623; }
.toast--achievement .toast-icon  { color: #f5a623; }

/* ── Bell button ─────────────────────────────────────────────── */
.notif-bell-btn {
  position     : relative;
  background   : none;
  border       : none;
  cursor       : pointer;
  color        : var(--dash-text-dim);
  padding      : .38rem .42rem;
  border-radius: 8px;
  transition   : background .15s, color .15s;
  line-height  : 1;
  display      : flex;
  align-items  : center;
}
.notif-bell-btn:hover   { background: rgba(255,255,255,.06); color: var(--dash-text); }
.notif-bell--active     { color: var(--dash-accent) !important; }

.notif-bell-badge {
  position      : absolute;
  top           : 0;
  right         : 0;
  min-width     : 16px;
  height        : 16px;
  background    : var(--dash-red);
  border-radius : 99px;
  font-size     : .62rem;
  font-weight   : 800;
  color         : #fff;
  display       : flex;
  align-items   : center;
  justify-content: center;
  padding       : 0 3px;
  pointer-events: none;
  border        : 2px solid var(--dash-surface);
}

/* ── Notification panel ──────────────────────────────────────── */
.notif-panel {
  position        : fixed;
  top             : 3.4rem;
  right           : .75rem;
  width           : 330px;
  max-height      : 480px;
  background      : #10121c;
  border          : 1px solid rgba(255,255,255,.08);
  border-radius   : 14px;
  box-shadow      : 0 16px 48px rgba(0,0,0,.6);
  z-index         : 9000;
  display         : flex;
  flex-direction  : column;
  overflow        : hidden;
  transform-origin: top right;
  transform       : scale(.9) translateY(-10px);
  opacity         : 0;
  pointer-events  : none;
  transition      : transform .22s cubic-bezier(.22,1,.36,1), opacity .2s ease;
}
.notif-panel--in {
  transform     : scale(1) translateY(0);
  opacity       : 1;
  pointer-events: all;
}

.notif-panel-header {
  display        : flex;
  align-items    : center;
  gap            : .5rem;
  padding        : .75rem 1rem .6rem;
  border-bottom  : 1px solid rgba(255,255,255,.06);
  flex-shrink    : 0;
}
.notif-panel-title {
  font-size     : .78rem;
  font-weight   : 700;
  color         : var(--dash-text);
  letter-spacing: .06em;
  text-transform: uppercase;
  flex          : 1;
}

.notif-panel-actions {
  display: flex;
  gap    : 4px;
}
.notif-panel-btn {
  background   : none;
  border       : none;
  cursor       : pointer;
  color        : var(--dash-text-faint);
  padding      : 4px 6px;
  border-radius: 6px;
  font-size    : .7rem;
  display      : flex;
  align-items  : center;
  gap          : 4px;
  transition   : background .15s, color .15s;
  white-space  : nowrap;
}
.notif-panel-btn:hover { background: rgba(255,255,255,.06); color: var(--dash-text); }

/* ── Tabs ─────────────────────────────────────────────────────── */
.notif-panel-tabs {
  display       : flex;
  gap           : 2px;
  padding       : .5rem .75rem .3rem;
  border-bottom : 1px solid rgba(255,255,255,.05);
  flex-shrink   : 0;
}
.notif-tab {
  background   : none;
  border       : none;
  cursor       : pointer;
  font-size    : .7rem;
  color        : var(--dash-text-faint);
  padding      : 3px 10px;
  border-radius: 99px;
  font-weight  : 600;
  letter-spacing: .04em;
  transition   : background .15s, color .15s;
}
.notif-tab:hover  { color: var(--dash-text); background: rgba(255,255,255,.05); }
.notif-tab.active {
  background: rgba(var(--accent-rgb,0,212,255),.12);
  color     : var(--dash-accent);
}

/* ── List ────────────────────────────────────────────────────── */
.notif-panel-list {
  flex         : 1;
  overflow-y   : auto;
  scrollbar-width: thin;
  scrollbar-color: #2a3050 transparent;
}
.notif-panel-empty {
  display        : flex;
  flex-direction : column;
  align-items    : center;
  justify-content: center;
  gap            : .5rem;
  padding        : 2.5rem 1rem;
  color          : var(--dash-text-faint);
  font-size      : .78rem;
}

/* ── Notification item ───────────────────────────────────────── */
.notif-item {
  display    : flex;
  align-items: flex-start;
  gap        : .6rem;
  padding    : .65rem 1rem;
  border-bottom: 1px solid rgba(255,255,255,.035);
  transition : background .12s;
  position   : relative;
}
.notif-item:last-child { border-bottom: none; }
.notif-item:hover       { background: rgba(255,255,255,.03); }
.notif-item--unread     { background: rgba(var(--accent-rgb,0,212,255),.035); }
.notif-item--unread:hover { background: rgba(var(--accent-rgb,0,212,255),.065); }

/* Unread left accent strip */
.notif-item--unread::before {
  content     : '';
  position    : absolute;
  left        : 0;
  top         : 0;
  bottom      : 0;
  width       : 2px;
  background  : var(--dash-accent);
  border-radius: 0 2px 2px 0;
}

.notif-item-icon-wrap {
  flex-shrink: 0;
  width      : 28px;
  height     : 28px;
  border-radius: 50%;
  display    : flex;
  align-items: center;
  justify-content: center;
  background : rgba(255,255,255,.04);
  color      : var(--dash-text-dim);
  margin-top : 1px;
}
.notif-item--t-friend_request .notif-item-icon-wrap { color: var(--dash-accent); background: rgba(var(--accent-rgb,0,212,255),.1); }
.notif-item--t-friend_accept  .notif-item-icon-wrap { color: var(--dash-green);  background: rgba(68,221,136,.12); }
.notif-item--t-message        .notif-item-icon-wrap { color: #a855f7;            background: rgba(168,85,247,.12); }
.notif-item--t-alert          .notif-item-icon-wrap { color: #f5a623;            background: rgba(245,166,35,.1);  }
.notif-item--t-achievement    .notif-item-icon-wrap { color: #f5a623;            background: rgba(245,166,35,.1);  }
.notif-item--t-success        .notif-item-icon-wrap { color: var(--dash-green);  background: rgba(68,221,136,.12); }
.notif-item--t-error          .notif-item-icon-wrap { color: var(--dash-red);    background: rgba(255,77,106,.12); }

.notif-item-body { flex: 1; min-width: 0; }
.notif-item-title {
  font-size     : .77rem;
  font-weight   : 600;
  color         : var(--dash-text);
  margin-bottom : 1px;
  line-height   : 1.35;
}
.notif-item-text {
  font-size    : .72rem;
  color        : var(--dash-text-dim);
  white-space  : nowrap;
  overflow     : hidden;
  text-overflow: ellipsis;
}

/* Friend-request action buttons */
.notif-item-actions {
  display   : flex;
  gap       : 6px;
  margin-top: 7px;
}
.notif-action-btn {
  font-size    : .7rem;
  font-weight  : 700;
  padding      : 3px 12px;
  border-radius: 99px;
  border       : 1px solid transparent;
  cursor       : pointer;
  transition   : background .15s, border-color .15s, color .15s;
  letter-spacing: .03em;
}
.notif-action-btn--accept {
  background  : rgba(var(--accent-rgb,0,212,255),.12);
  color       : var(--dash-accent);
  border-color: rgba(var(--accent-rgb,0,212,255),.25);
}
.notif-action-btn--accept:hover {
  background  : rgba(var(--accent-rgb,0,212,255),.22);
  border-color: var(--dash-accent);
}
.notif-action-btn--decline {
  background  : rgba(255,255,255,.04);
  color       : var(--dash-text-faint);
  border-color: rgba(255,255,255,.08);
}
.notif-action-btn--decline:hover {
  background  : rgba(255,77,106,.1);
  color       : var(--dash-red);
  border-color: rgba(255,77,106,.25);
}

/* Meta column (time + dismiss) */
.notif-item-meta {
  display       : flex;
  flex-direction: column;
  align-items   : flex-end;
  gap           : 4px;
  flex-shrink   : 0;
}
.notif-item-time {
  font-size  : .67rem;
  color      : var(--dash-text-faint);
  white-space: nowrap;
  font-family: var(--font-mono);
}
.notif-item-dismiss {
  background   : none;
  border       : none;
  cursor       : pointer;
  color        : transparent;
  padding      : 3px;
  border-radius: 4px;
  display      : flex;
  align-items  : center;
  transition   : background .12s, color .12s;
}
.notif-item:hover .notif-item-dismiss { color: var(--dash-text-faint); }
.notif-item-dismiss:hover {
  background: rgba(255,77,106,.12);
  color     : var(--dash-red) !important;
}

/* ── Mobile adjustments ──────────────────────────────────────── */
@media (max-width: 600px) {
  #toast-container {
    bottom: 5rem;
    right : .75rem;
    left  : .75rem;
  }
  .toast { min-width: unset; max-width: 100%; }

  .notif-panel {
    top          : auto;
    bottom       : 4.5rem;
    right        : .5rem;
    left         : .5rem;
    width        : auto;
    max-height   : 55vh;
    transform-origin: bottom right;
  }
}
